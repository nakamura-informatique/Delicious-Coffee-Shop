CREATE DATABASE QLCAFE
GO
USE QLCAFE
--Tạo bảng cơ sở dữ liệu của Khu bao gồm thuộc tính mã khu và tên khu
CREATE TABLE TESTDATE
(	
	ID	INT PRIMARY KEY,
	DAT TIME
);


CREATE TABLE KHU
(
	MAKHU	CHAR(3)			PRIMARY KEY,
	TENKHU	NVARCHAR(255)	NOT NULL	UNIQUE,
);

SELECT * FROM KHU

INSERT INTO KHU(MAKHU,TENKHU)
VALUES
('K01', N'KHU VUI CHƠI TRẺ EM'),
('K02', N'KHU VƯỜN'),
('K03', N'KHU NGOÀI TRỜI'),
('K04', N'PHÒNG LẠNH')

CREATE TABLE BAN
(	
	SOTHUTU	INT			NOT NULL,
	MAKHU	CHAR(3)		NOT NULL	UNIQUE,
	SOGHE	INT			NOT NULL	CHECK (SOGHE > -1 AND SOGHE <11)
	CONSTRAINT PK_BAN		PRIMARY KEY(MAKHU,SOTHUTU),
	CONSTRAINT FK_BAN_KHU	FOREIGN KEY (MAKHU) REFERENCES KHU (MAKHU)	ON DELETE CASCADE
);

SELECT * FROM BAN

INSERT INTO BAN(SOTHUTU, MAKHU, SOGHE)
VALUES
(4,'K03',3),
(8,'K03',2),
(3,'K01',5),
(1,'K04',10)

CREATE TABLE PHONGVIP
(
MAPHONG			NVARCHAR(255)	PRIMARY KEY,
MAKHU			CHAR(3)			NOT NULL,
SOKHACHTOITHIEU	INT				NOT NULL	CHECK(SOKHACHTOITHIEU>-1 AND SOKHACHTOITHIEU<11),
SOKHACHTOIDA	INT				NOT NULL,	
CONSTRAINT CK_KHACHTOIDA CHECK(SOKHACHTOIDA>SOKHACHTOITHIEU AND SOKHACHTOIDA<50),
CONSTRAINT FK_PHONGVIP_KHU	FOREIGN KEY(MAKHU)	REFERENCES KHU(MAKHU)	ON DELETE CASCADE
);

SELECT * FROM PHONGVIP

SET IDENTITY_INSERT PHONGVIP ON

INSERT INTO PHONGVIP(MAPHONG, MAKHU, SOKHACHTOITHIEU, SOKHACHTOIDA)
VALUES
('VIP1','K04',10,40),
('VIP3','K01',8,49),
('VIP5','K03',7,27),
('VIP9','K02',2,30)

SET IDENTITY_INSERT PHONGVIP OFF

CREATE TABLE NHOM
(
	MANHOM		INT IDENTITY (1,1)	PRIMARY KEY,
	TENNHOM		NVARCHAR(255)		NOT NULL	UNIQUE
);

SELECT * FROM NHOM

SET IDENTITY_INSERT NHOM ON

INSERT INTO NHOM(MANHOM, TENNHOM)
VALUES
(1,N'COFFEE'),
(2,N'NƯỚC TRÁI CÂY'),
(3,N'CƠM PHẦN'),
(4,N'ĂN VẶT'),
(5,N'ĐIỂM TÂM')

SET IDENTITY_INSERT NHOM OFF

CREATE TABLE MONAN
(
	MAMON	CHAR(5)			PRIMARY KEY,
	TEN		NVARCHAR(255)	NOT NULL,
	HINH	NVARCHAR(255)	NOT NULL,
	MANHOM	INT IDENTITY (1,1)	NOT NULL,
	CONSTRAINT FK_MONAN_NHOM	FOREIGN KEY(MANHOM)	REFERENCES NHOM(MANHOM)	
);

SELECT * FROM MONAN

SET IDENTITY_INSERT MONAN ON

INSERT INTO MONAN(MAMON, TEN, HINH, MANHOM)
VALUES
('D0483',N'CÀ PHÊ SỮA ĐÁ'		,N'https://ongbi.vn/ca-phe-sua-da/'																		,1),
('D1124',N'CÀ PHÊ ĐEN ĐÁ'		,N'https://cafesongao.com/huong-dan-pha-ca-phe-den-da-ngon-dung-cach/'									,1),
('D7473',N'SINH TỐ ĐU ĐỦ		,N'https://www.huongnghiepaau.com/sinh-to-du-du															,2),
('F6637',N'CƠM TẤM SƯỜN NƯỚNG'	,N'https://beptruong.edu.vn/day-nau-an/mo-quan-kinh-doanh/com-tam/cach-uop-thit-nuong'					,3),
('D2001',N'TRÀ SỮA TRÂN CHÂU'	,N'https://www.bachhoaxanh.com/kinh-nghiem-hay/huong-dan-cach-lam-tra-sua-tran-chau-duong-den-1412109'	,4),
('F5546',N'KHOAI TÂY CHIÊN'		,N'https://www.bachhoaxanh.com/kinh-nghiem-hay/cach-lam-khoai-tay-chien-trong-10-phut-voi-noi-chien-khong-dau-khoai-gion-tan-de-lau-cung-khong-me-1281398',4),
('F2574',N'HỦ TIẾU NAM VANG'	,N'https://www.disneycooking.com/cach-nau-hu-tieu-nam-vang'												,5),
('F3333',N'BÁNH MÌ CHẢO'		,N'https://www.dienmayxanh.com/vao-bep/cach-lam-banh-mi-chao-don-gian-thom-ngon-nhanh-chong-01800'		,5)

SET IDENTITY_INSERT MONAN OFF

CREATE TABLE NUOCUONG
(
	MAMON		CHAR(5)	NOT NULL	PRIMARY KEY,
	CONSTRAINT	FK_NUOCUONG_MONAN FOREIGN KEY(MAMON)	REFERENCES MONAN(MAMON)	ON DELETE CASCADE						
);

SELECT * FROM NUOCUONG

SET IDENTITY_INSERT NUOCUONG ON

INSERT INTO NUOCUONG(MAMON)
VALUES
('D0483'),
('D1124'),
('D7473'),
('D2001')

SET IDENTITY_INSERT NUOCUONG OFF

CREATE TABLE KICHTHUOCNUOCUONG
(
	MANUOCUONG	CHAR(5)								NOT NULL,
	SIZE		CHAR CHECK (SIZE IN ('S','M','L'))	NOT NULL,
	DONGIA		DECIMAL(6,2)						NOT NULL,
	CONSTRAINT PK_KICHTHUOCNUOCUONG PRIMARY KEY(MANUOCUONG, SIZE),
	CONSTRAINT FK_KICHTHUOCNUOCUONG_NUOCUONG FOREIGN KEY(MANUOCUONG) REFERENCES NUOCUONG(MAMON) ON DELETE CASCADE					
);

SELECT * FROM KICHTHUOCNUOCUONG

SET IDENTITY_INSERT KICHTHUOCNUOCUONG ON

INSERT INTO KICHTHUOCNUOCUONG(MANUOCUONG, SIZE, DONGIA)
VALUES
('D1124','S',15000),
('D7473','L',40000),
('D2001','M',30000),
('D0483','M',25000)

SET IDENTITY_INSERT KICHTHUOCNUOCUONG OFF


CREATE TABLE DOAN
(
	MAMON		CHAR(5)			NOT NULL	PRIMARY KEY,
	DONGIA		DECIMAL(6,3)	NOT NULL
	CONSTRAINT FK_DOAN	FOREIGN KEY(MAMON) REFERENCES MONAN(MAMON) ON DELETE CASCADE				
);

SELECT * FROM DOAN

SET IDENTITY_INSERT DOAN ON

INSERT INTO DOAN(MAMON, DONGIA)
VALUES
('F5546',40000),
('F2574',35000),
('F3333',50000),
('F6637',35000)

SET IDENTITY_INSERT DOAN OFF

CREATE TABLE GIOPHUCVUDOAN
(
	MADOAN		CHAR(5)		NOT NULL,
	BATDAU		TIME		NOT NULL,
	KETTHUC		TIME		NOT NULL,
	CONSTRAINT PK_GIOPHUCVUDOAN PRIMARY KEY(MADOAN, BATDAU),
	CONSTRAINT GIOGIAC CHECK (BATDAU < KETTHUC),
	CONSTRAINT FK_GIOPHUCVUDOAN_DOAN FOREIGN KEY(MADOAN) REFERENCES DOAN(MAMON) ON DELETE CASCADE					
);

SELECT * FROM GIOPHUCVUDOAN

SET IDENTITY_INSERT GIOPHUCVUDOAN ON

INSERT INTO GIOPHUCVUDOAN(MADOAN, BATDAU, KETTHUC)
VALUES
('F2574','07:10'),
('F5546','08:20'),
('F6637','07:15'),
('F3333','09:50')

SET IDENTITY_INSERT GIOPHUCVUDOAN OFF

CREATE TABLE KHACHHANG
(
	CMND		CHAR(12)			PRIMARY KEY			NOT NULL,
	HOTEN		NVARCHAR(255)							NOT NULL,
	GIOITINH	CHAR CHECK (GIOITINH IN ('M','F'))		NOT NULL,
	NGAYSINH	INT										NOT NULL,
	SODIENTHOAI	INT										NOT NULL,
	SONHA		NVARCHAR(255)							NOT NULL,
	DUONG		NVARCHAR(255)							NOT NULL,
	QUAN		NVARCHAR(255)							NOT NULL,
	PHUONG		NVARCHAR(255)							NOT NULL,
	TINHTHANH	NVARCHAR(255)							NOT NULL,
	DIEM		INT										NOT NULL	DEFAULT 0	CHECK(DIEM >0)
)

SELECT * FROM KHACHHANG

SET IDENTITY_INSERT KHACHHANG ON

INSERT INTO KHACHHANG(CMND, HOTEN, GIOITINH, NGAYSINH, SODIENTHOAI, SONHA, DUONG, QUAN, PHUONG, TINHTHANH, DIEM)
VALUES
('083444798366',N'NGUYỄN THANH HẢI'	,'M',25	,0589415698,53	,N'THẠCH LAM'		,N'BÌNH TÂN'	,N'BÌNH HƯNG HÒA B'	,N'HỒ CHÍ MINH',20),
('073476000048',N'NGUYỄN VĂN HẢI'	,'M',12	,0907588631,18	,N'TRẦN CHÍ ĐÁO'	,N'HÓC MÔN'		,N'BÌNH HƯNG HÒA A'	,N'HÀ NỘI',7),
('083475965274',N'VÕ CHÍ NGUYÊN'	,'M',4	,0903876982,101	,N'NGUYỄN SƠN'		,N'HAI BÀ TRƯNG',N'THẠNH PHÚ'		,N'VĨNH LONG',11),
('083201788521',N'VÕ THỊ DUYÊN'		,'F',6	,0903814763,6	,N'LÝ THƯỜNG KIỆT'	,N'TÂN PHÚ'		,N'BÌNH TRỊ ĐÔNG B'	,N'HỒ CHÍ MINH',40)

SET IDENTITY_INSERT KHACHHANG OFF

CREATE TABLE NHACUNGCAP
(
	MANCC			CHAR(6)			NOT NULL	PRIMARY KEY,	
	TENNCC			NVARCHAR(255)	NOT NULL,
	MASOTHUE		NVARCHAR(13)	NOT NULL	UNIQUE,
	SODIENTHOAI		CHAR(8)			NOT NULL,
	SONHA			NVARCHAR(255)	NOT NULL,
	DUONG			NVARCHAR(255)	NOT NULL,
	QUAN			NVARCHAR(255)	NOT NULL,
	PHUONG			NVARCHAR(255)	NOT NULL,
	TINHTHANH		NVARCHAR(255)	NOT NULL,
	DIEM			INT				NOT NULL	DEFAULT 0	CHECK(DIEM >0)
)

SELECT * FROM NHACUNGCAP

SET IDENTITY_INSERT NHACUNGCAP ON

INSERT INTO NHACUNGCAP(MANCC, TENNCC, MASOTHUE, SODIENTHOAI, SONHA, DUONG, QUAN, PHUONG, TINHTHANH, DIEM)
VALUES
('NCC189',N'CÔNG TY TNHH AJINOMOTO'		,N'1746936413691','0547333504',N'11',N'LÊ THÚC HOẠCH'	,N'11'			,N'TÂN ĐỊNH'			,N'VĨNH LONG'	,30),
('NCC911',N'CÔNG TY TNHH MASAN'			,N'0142963941526','0475333108',N'8'	,N'TRẦN THỦ ĐỘ'		,N'6'			,N'ĐA KAO'				,N'BẠC LIÊU'	,12),
('NCC108',N'CÔNG TY TNHH ACECOOK'		,N'7826336252744','0798000413',N'32',N'TÔ HIẾN THÀNH'	,N'TÂN BÌNH'	,N'NGUYỄN THÁI BÌNH'	,N'VŨNG TÀU'	,6),
('NCC662',N'CÔNG TY TNHH MƯỜNG THANH'	,N'3244589675624','0147852369',N'6'	,N'KÊNH TÂN HÓA'	,N'2'			,N'TÂN CHÁNH HIỆP'		,N'VĨNH PHÚC'	,22)

SET IDENTITY_INSERT NHACUNGCAP OFF

CREATE TABLE EMAILNHACUNGCAP
(
	MANCC		CHAR(6)			NOT NULL,
	EMAIL		NVARCHAR(255)	NOT NULL	UNIQUE,
	CONSTRAINT PK_EMAILNHACUNGCAP PRIMARY KEY(MANCC, EMAIL),
	CONSTRAINT FK_EMAILNHACUNGCAP_NHACUNGCAP	FOREIGN KEY(MANCC)	REFERENCES NHACUNGCAP(MANCC)					
);

SELECT * FROM EMAILNHACUNGCAP

SET IDENTITY_INSERT EMAILNHACUNGCAP ON

INSERT INTO EMAILNHACUNGCAP(MANCC, EMAIL)
('NCC662',N'muongthanh at gmail dot com'	),
('NCC911',N'masangroup at gmail dot com'	),
('NCC108',N'acecookgroup at gmail dot com'	),
('NCC189',N'ajinomoto at gmail dot com'		)

SET IDENTITY_INSERT EMAILNHACUNGCAP OFF

CREATE TABLE DIENTHOAINHACUNGCAP
(
	MANCC		CHAR(6)			NOT NULL,
	DIENTHOAI	CHAR			NOT NULL,
	CONSTRAINT PK_DIENTHOAINHACUNGCAP PRIMARY KEY(MANCC, DIENTHOAI),
	CONSTRAINT FK_DIENTHOAINHACUNGCAP_NHACUNGCAP	FOREIGN KEY(MANCC)	REFERENCES NHACUNGCAP(MANCC)	ON DELETE CASCADE						
);

SELECT * FROM DIENTHOAINHACUNGCAP

SET IDENTITY_INSERT DIENTHOAINHACUNGCAP ON

INSERT INTO DIENTHOAINHACUNGCAP(MANCC, DIENTHOAI)
('NCC189','0542999415'),
('NCC662','0745331059'),
('NCC911','0589777145'),
('NCC108','0412987413')

SET IDENTITY_INSERT DIENTHOAINHACUNGCAP OFF

CREATE TABLE HOADON
(
	MAHOADON		CHAR(16) 		NOT NULL	PRIMARY KEY,
	NGAY			DATE			NOT NULL,
	SOLUONGKHACH	INT				NOT NULL	CHECK (SOLUONGKHACH > 0),
	GIOVAO			TIME,
	GIORA			TIME,
	SOLUONGMON		INT				NOT NULL,
	TONGTIEN		DECIMAL(6,0)	NOT NULL	DEFAULT 0,
	MAKHACHHANG		CHAR(12)		NOT NULL,
	DATHANHTOAN		BIT				DEFAULT 0,
	CONSTRAINT GIOVAORA CHECK (GIOVAO < GIORA),
	CONSTRAINT FK_HOADON FOREIGN KEY(MAKHACHHANG) REFERENCES KHACHHANG(CMND)	ON DELETE CASCADE
);

SELECT * FROM HOADON

SET IDENTITY_INSERT HOADON ON

INSERT INTO HOADON(MAHOADON, NGAY, SOLUONGKHACH, GIOVAO, GIORA, SOLUONGMON, TONGTIEN, MAKHACHHANG, DATHANHTOAN)
('HD12032023000001','12',7,'08:10','09:45',4,420000,'083444798366',1),
('HD18032023000002','18',2,'10:12','12:20',3,333400,'073476000048',0),
('HD02042023000003','02',5,'09:14','11:43',7,926300,'083475965274',0),
('HD18042023000004','18',3,'14:08','15:48',5,605000,'083201788521',1),

SET IDENTITY_INSERT HOADON OFF

CREATE TABLE HOADONGOMNUOCUONG
(
	MAHOADON	CHAR(16)								NOT NULL,
	MANUOCUONG	CHAR(5)									NOT NULL,
	SIZE		CHAR	CHECK(SIZE IN ('S','M','L'))	NOT NULL,
	SOLUONG		INT		NOT NULL	DEFAULT 1		CHECK (SOLUONG>0),
	CONSTRAINT PK_HOADONGOMNUOCUONG PRIMARY KEY(MAHOADON, MANUOCUONG,SIZE),
	CONSTRAINT FK_HOADONGOMNUOCUONG_HOADON	FOREIGN KEY(MAHOADON)	REFERENCES HOADON(MAHOADON)	ON DELETE CASCADE,		
	CONSTRAINT FK_HOADONGOMNUOCUONG_KICHTHUOCNUOCUONG	FOREIGN KEY(MANUOCUONG, SIZE) REFERENCES KICHTHUOCNUOCUONG (MANUOCUONG, SIZE)	ON DELETE CASCADE,
);

SELECT * FROM HOADONGOMNUOCUONG

SET IDENTITY_INSERT HOADONGOMNUOCUONG ON

INSERT INTO HOADONGOMNUOCUONG(MAHOADON, MANUOCUONG, SIZE, SOLUONG)
VALUES
('HD12032023000001','D1124','S',2),
('HD18032023000002','D7473','L',1),
('HD02042023000003','D2001','M',3),
('HD18042023000004','D0483','M',4)

SET IDENTITY_INSERT HOADONGOMNUOCUONG OFF

CREATE TABLE HOADONGOMDOAN
(
	MAHOADON	CHAR(16)	NOT NULL,
	MADOAN		CHAR(5)		NOT NULL,
	SOLUONG		INT			NOT NULL	DEFAULT 1		CHECK (SOLUONG>0), 
	CONSTRAINT FK_HOADONGOMDOAN_HOADON	FOREIGN KEY(MAHOADON) REFERENCES HOADON(MAHOADON)	ON DELETE CASCADE,	
	CONSTRAINT FK_HOADONGOMDOAN_DOAN	FOREIGN KEY(MADOAN)	REFERENCES DOAN(MAMON)		ON DELETE CASCADE	
);

SELECT * FROM HOADONGOMDOAN

SET IDENTITY_INSERT HOADONGOMDOAN ON

INSERT INTO HOADONGOMDOAN(MAHOADON, MADOAN, SOLUONG)
VALUES
('HD12032023000001','F5546',4),
('HD18032023000002','F2574',2),
('HD02042023000003','F3333',3),
('HD18042023000004','F6637',3)

SET IDENTITY_INSERT HOADONGOMDOAN OFF

CREATE TABLE BANHOADON
(
	MAHOADON	CHAR(16)	NOT NULL,
	MAKHU		CHAR(3)		NOT NULL,
	SOTHUTU		INT			NOT NULL,
	CONSTRAINT PK_BANHOADON PRIMARY KEY(MAHOADON,MAKHU,SOTHUTU),
	CONSTRAINT FK_BANHOADON_HOADON FOREIGN KEY(MAHOADON) REFERENCES HOADON(MAHOADON),
	CONSTRAINT FK_BANHOADON_BAN FOREIGN KEY(MAKHU,SOTHUTU) REFERENCES BAN(MAKHU,SOTHUTU),
);

SELECT * FROM BANHOADON

SET IDENTITY_INSERT BANHOADON ON

INSERT INTO BANHOADON(MAHOADON, MAKHU, SOTHUTU)
('HD12032023000001','K03',4),
('HD18032023000002','K03',8),
('HD02042023000003','K01',3),
('HD18042023000004','K04',1)

SET IDENTITY_INSERT BANHOADON OFF

CREATE TABLE PHONGVIPHOADON
(
	MAHOADON		CHAR(16)			NOT NULL,
	MAPHONGVIP		NVARCHAR(255)		NOT NULL,
	CONSTRAINT PK_PHONGVIPHOADON PRIMARY KEY(MAHOADON, MAPHONGVIP),
	CONSTRAINT FK_PHONGVIPHOADON_HOADON	FOREIGN KEY(MAHOADON)	REFERENCES HOADON(MAHOADON)		ON DELETE CASCADE,								
	CONSTRAINT FK_PHONGVIPHOADON_2	FOREIGN KEY(MAPHONGVIP)		REFERENCES PHONGVIP(MAPHONG)	ON DELETE CASCADE				
);

SELECT * FROM PHONGVIPHOADON

SET IDENTITY_INSERT PHONGVIPHOADON ON

INSERT INTO PHONGVIPHOADON(MAHOADON, MAPHONGVIP)
VALUES
('HD12032023000001','VIP1'),
('HD18032023000002','VIP3'),
('HD02042023000003','VIP5'),
('HD18042023000004','VIP9')

SET IDENTITY_INSERT PHONGVIPHOADON OFF

CREATE TABLE NGUYENLIEU
(
	MANGUYENLIEU	CHAR(6)				NOT NULL	PRIMARY KEY,
	TEN				NVARCHAR(255)		NOT NULL,
	DONVITINH		NVARCHAR(255)		NOT NULL,
	MOTA			NVARCHAR(255)		NOT NULL
)

SELECT * FROM NGUYENLIEU

SET IDENTITY_INSERT NGUYENLIEU ON

INSERT INTO NGUYENLIEU(MANGUYENLIEU, TEN, DONVITINH, MOTA)
VALUES
('NL4178',N'DƯA LEO'		,N'TRÁI'	,N'TRÁI CÂY LÀM MÁT CƠ THỂ, TÁC DỤNG GIẢM MỤN'),
('NL7412',N'GẠO HÀNG CHÂU'	,N'KG'		,N'NGUỒN GỐC TỪ TRUNG QUỐC, THƠM NGON NỨC MŨI, ĂN MỘT LẦN LÀ GHIỀN'),
('NL8523',N'THỊT BÒ KOBE'	,N'KG'		,N'THỊT BÒ CHẤT LƯỢNG CAO TỪ NHẬT BẢN, BÒ ĐƯỢC TẮM VÀ NGHE NHẠC HẰNG NGÀY'),
('NL2574',N'THỊT HEO'		,N'KG'		,N'THỊT HEO LOẠI MỘT')

SET IDENTITY_INSERT NGUYENLIEU OFF

CREATE TABLE CUNGCAP
(
	MANGUYENLIEU		CHAR(6)		NOT NULL,
	MAMON				CHAR(5)		NOT NULL,
	MANHACUNGCAP		CHAR(6)		NOT NULL,
	CONSTRAINT PK_CUNGCAP PRIMARY KEY(MANGUYENLIEU, MAMON),
	CONSTRAINT FK_CUNGCAP_NGUYENLIEU FOREIGN KEY(MANGUYENLIEU)	REFERENCES NGUYENLIEU(MANGUYENLIEU)		ON DELETE CASCADE,
	CONSTRAINT FK_CUNGCAP_MON		 FOREIGN KEY(MAMON)			REFERENCES MONAN(MAMON)					ON DELETE CASCADE,	
	CONSTRAINT FK_CUNGCAP_NHACUNGCAP FOREIGN KEY(MANHACUNGCAP)	REFERENCES NHACUNGCAP(MANCC)			ON DELETE CASCADE											
);

SELECT * FROM CUNGCAP

SET IDENTITY_INSERT CUNGCAP ON

INSERT INTO CUNGCAP(MANGUYENLIEU, MAMON, MANHACUNGCAP)
VALUES
('NL4178','F6637','NCC189'),
('NL7412','F5546','NCC911'),
('NL8523','F2574','NCC108'),
('NL2574','F3333','NCC662')

SET IDENTITY_INSERT CUNGCAP OFF

CREATE TABLE MUANGUYENLIEU
(
	MANGUYENLIEU	CHAR(6)				NOT NULL,
	MANHACUNGCAP	CHAR(6)				NOT NULL,
	DONGIA			DECIMAL(6,2)		NOT NULL,
	CONSTRAINT PK_MUANGUYENLIEU PRIMARY KEY(MANGUYENLIEU, MANHACUNGCAP),
	CONSTRAINT FK_MUANGUYENLIEU_NGUYENLIEU	FOREIGN KEY(MANGUYENLIEU)	REFERENCES NGUYENLIEU(MANGUYENLIEU)		ON DELETE CASCADE,	
	CONSTRAINT FK_MUANGUYENLIEU_NHACUNGCAP	FOREIGN KEY(MANHACUNGCAP)	REFERENCES NHACUNGCAP(MANCC)			ON DELETE CASCADE						
);

SELECT * FROM MUANGUYENLIEU

SET IDENTITY_INSERT MUANGUYENLIEU ON

INSERT INTO MUANGUYENLIEU(MANGUYENLIEU, MANHACUNGCAP, DONGIA)
VALUES
('NL4178','NCC189',2000),
('NL7412','NCC911',25000),
('NL8523','NCC108',240000),
('NL2574','NCC662',100000)

SET IDENTITY_INSERT MUANGUYENLIEU OFF

CREATE TABLE LANMUA
(
	MANGUYENLIEU	CHAR(6)				NOT NULL,
	MANHACUNGCAP	CHAR(6)				NOT NULL,
	THOIGIAN		DATETIME,
	SOLUONG			INT		NOT NULL	DEFAULT 1	CHECK(SOLUONG>0)
	CONSTRAINT PK_LANMUA PRIMARY KEY(MANGUYENLIEU,MANHACUNGCAP,THOIGIAN)
	CONSTRAINT FK_LANMUA_NGUYENLIEU	FOREIGN KEY(MANGUYENLIEU)		
						REFERENCES NGUYENLIEU(MANGUYENLIEU)		ON DELETE CASCADE,
	CONSTRAINT FK_LANMUA_NHACUNGCAP	FOREIGN KEY(MANHACUNGCAP)		
						REFERENCES NHACUNGCAP(MANCC)			ON DELETE CASCADE
);

SELECT * FROM LANMUA

SET IDENTITY_INSERT LANMUA ON

INSERT INTO LANMUA(MANGUYENLIEU, MANHACUNGCAP, THOIGIAN, SOLUONG)
VALUES
('NL4178','NCC189','20230311 08:15',200),
('NL7412','NCC911','20230315 14:27',20),
('NL8523','NCC108','20230317 09:47',15),
('NL2574','NCC662','20230329 11:31',30)

SET IDENTITY_INSERT LANMUA OFF